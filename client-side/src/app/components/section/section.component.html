<div class="section-area " [ngClass]="{ 'editable-state': editable }" 
    cdkDrag [cdkDragDisabled]="!editable" [cdkDragData]="index" (cdkDragStarted)="onDragStart($event)" (cdkDragEnded)="onDragEnd($event)" 
>
    <div class="section-container " [ngClass]="{ 'active-section': isActive && selectedQuestion === null }"
         [ngStyle]="{'align-items': description?.length > 0 ? 'flex-start' : 'center'}" 
        (mousedown)="onSectionClicked($event)">
        <ng-container *ngIf="editable; then editableTitleTemplate; else runnerTitleTemplate"></ng-container>
        <ng-template #editableTitleTemplate>
            <div class="pep-button sm sequence-number" cdkDragHandle>
                <span class="body-xs " title="{{ index + 1 }}">{{ index + 1 }}</span>
            </div>
    
            <div class="title-description-cont">
                <pep-field-title [label]="title">
                </pep-field-title> 

                <ng-container *ngIf="description?.length > 0">
                    <span class="body-xs color-dimmed description-container" title="{{ description }}">{{ description }}</span>
                </ng-container>
        </div>
        </ng-template>
        <ng-template #runnerTitleTemplate>
            <!-- <pep-separator class="title-container" [label]="title || ('SURVEY_MANAGER.SECTION_TITLE_PLACEHOLDER' | translate)"></pep-separator> -->
            <div class="title-description-cont pep-border-bottom" [ngStyle]="{'padding-bottom': description?.length > 0 ? '.5rem' : '0'}">
                <label class="body-md title">{{title}}</label> 

                <ng-container *ngIf="description?.length > 0">
                    <br/>
                    <span class="body-xs color-dimmed description-container" title="{{ description }}">{{ description }}</span>
                </ng-container>
        </div>
        </ng-template>
    </div>

    <div [id]="sectionContainerKeyPrefix" class="questions-wrapper "
        cdkDropList
        [cdkDropListConnectedTo]="sectionsQuestionsDropList"
        (cdkDropListDropped)="onQuestionDropped($event)">
        
        <ng-container *ngFor="let question of questions; let i=index;">
            <survey-question-generator [editable]="editable" [question]="question" [sequenceNumber]="(index + 1) + '.' + (i + 1)" 
                [isActive]="isActive && selectedQuestion === question"
                (questionClick)="onQuestionClicked(i)" (addQuestionClick)="onAddQuestionClicked($event, i)"></survey-question-generator>
        </ng-container>
        
    </div>

    <div *ngIf="editable" class="add-separator-container" [ngClass]="{ 'is-grabbing': isGrabbing }">
        <pep-button class="add-button" styleType="regular" sizeType="sm" iconName="number_plus" 
            [value]="'SURVEY_MANAGER.SURVEY_EDITOR.ADD_SECTION' | translate" (buttonClick)="onAddSectionClicked()"></pep-button>

        <survey-question-menu class="add-button" sizeType="sm" styleType="regular" (questionTypeClick)="onAddQuestionClicked($event)"></survey-question-menu>
    </div>
</div>